(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/changePhone/changePhone"],{"0a7a":function(e,t,n){"use strict";n.r(t);var o=n("85cd"),i=n("7e7f");for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);n("6aa1");var a=n("2877"),u=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,null,null);t["default"]=u.exports},"5b48":function(e,t,n){},"6aa1":function(e,t,n){"use strict";var o=n("5b48"),i=n.n(o);i.a},"7e7f":function(e,t,n){"use strict";n.r(t);var o=n("a9ea"),i=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);t["default"]=i.a},"85cd":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i})},a9ea:function(e,t,n){"use strict";(function(e,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{num:60,countdown:"",beginFalg:!1,codeTime:"",timeText:"",codeText:"",newPhone:""}},methods:{sendCode:function(){var t=/^1[3-9]\d{9}$/;if(""==this.phone||!t.test(this.phone))return e.showToast({title:"请检查手机号",icon:"none",mask:!0}),setTimeout(function(){e.hideToast()},2e3),!1;this.codeTime=setInterval(this.countDown,1e3);var i=new n(this.phone).toString("base64");e.request({url:this.websiteUrl+"/api/code/sms",method:"POST",data:{mobile:i},success:function(e){console.log(o(e," at pages\\changePhone\\changePhone.vue:57"))},fail:function(){},complete:function(){}})},countDown:function(){this.num--,this.beginFalg=!0,this.timeText=this.num+"s",this.num<=0&&(this.num=60,this.timeText="",this.beginFalg=!1,clearInterval(this.codeTime))},checkCode:function(){return""!=this.codeText||(e.showToast({title:"验证码不能为空",icon:"none",mask:!0}),setTimeout(function(){e.hideToast()},2e3),!1)},checkPhone:function(){var t=/^1[3-9]\d{9}$/;return!(""==this.newPhone||!t.test(this.newPhone))||(e.showToast({title:"请检查手机号",icon:"none",mask:!0}),setTimeout(function(){e.hideToast()},2e3),!1)},confirm:function(){var t=this;if(!this.checkCode()||!this.checkPhone())return!1;e.showModal({title:"确认手机号",content:"确认要将手机号修改为"+this.newPhone,showCancel:!0,cancelText:"取消",confirmText:"确定",success:function(o){if(o.confirm){var i=t.$store.state.userInfo,s=i.userId,a=i.loginToken,u=new n(t.phone).toString("base64"),c=new n(t.newPhone).toString("base64");e.request({url:t.websiteUrl+"/api/user/updMobile",method:"POST",header:{Authorization:a},data:{userId:s,mobile:u,smsCode:t.codeText,newMobile:c},success:function(o){if(0==o.data.status){var s=new n(o.data.user.userPhone,"base64").toString("utf8");i.userPhone=s,t.$store.commit("login",i),e.showToast({title:"修改成功",mask:!0}),setTimeout(function(){e.hideToast(),e.navigateBack()},400)}else 1001==o.data.status?(e.showToast({title:o.data.message,icon:"none",mask:!0}),setTimeout(function(){e.hideToast(),e.navigateTo({url:"/pages/login/login",animationType:"slide-in-right"})},300)):(e.showToast({title:o.data.message,icon:"none",mask:!0}),setTimeout(function(){e.hideToast()},2e3))},fail:function(){},complete:function(){}})}},fail:function(){},complete:function(){}})}},computed:{phone:function(){return this.$store.state.userInfo.userPhone}}};t.default=i}).call(this,n("6e42")["default"],n("b639").Buffer,n("0de9")["default"])},b463:function(e,t,n){"use strict";(function(e){n("c5e3"),n("921b");o(n("66fd"));var t=o(n("0a7a"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])}},[["b463","common/runtime","common/vendor"]]]);