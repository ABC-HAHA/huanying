(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/download/video/video"],{"05ab":function(e,t,i){"use strict";(function(e){i("c5e3"),i("921b");n(i("66fd"));var t=n(i("8108"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},"13d0":function(e,t,i){"use strict";i.r(t);var n=i("1b6a"),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t["default"]=s.a},"1b6a":function(e,t,i){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{isCancel:!1,downVideo:[],playFlag:!0,name:"",num:0,isSelect:!1,allSelect:"全选",selectedId:0,selectedArr:[]}},methods:{creatView:function(){var e=null;e=new plus.nativeObj.View("control",{top:"0px",left:"0px",height:"44px",width:"100%"},[{tag:"rect",id:"rect",position:{top:"0px",left:"0px",width:"100%",height:"44px"},rectStyles:{color:"rgba(0,0,0,0.5)"}},{tag:"img",id:"img",src:"static/fanhui.png",position:{top:"14px",left:"15px",width:"17px",height:"17px"}}]),e.show(),this.listenerEvent(e)},listenerEvent:function(t){t.setTouchEventRect({top:"0",left:"0",width:"87px",height:"44px"}),t.addEventListener("click",function(t){console.log(e("点击原生控件："+JSON.stringify(t)," at pages\\download\\video\\video.vue:66"))},!1)},creatVideoPlay:function(e){var t=null;t=plus.video.createVideoPlayer("localVideo",{src:e,autoplay:"true",direction:"-90","show-fullscreen-btn":"false",position:"absolute"}),t.requestFullScreen(-90),plus.webview.currentWebview().append(t),t.addEventListener("fullscreenchange",function(){t.close()},!1)},videoMore:function(e){if(!this.isCancel){var t=e.currentTarget.dataset.url,i=e.currentTarget.dataset.str,n=e.currentTarget.dataset.name,s=plus.os.name.toUpperCase(),a=parseInt(e.currentTarget.dataset.index),o=parseInt(e.currentTarget.dataset.down),l=this;if(-1!=i.indexOf("%"))switch(s){case"ANDROID":if(1==o){var d=plus.android.newObject("com.tjyz.video.download.DownloadTask");plus.android.invoke(d,"pauseDownload"),clearInterval(this.timer),this.$set(this.downVideo[a],"percent","已暂停"),this.$set(this.downVideo[a],"down","0")}else{var r=plus.android.newObject("com.tjyz.video.download.TS");plus.android.invoke(r,"getTSFile","",this.name,n),this.timer=setInterval(function(){l.polling(a)},1500),this.$set(this.downVideo[a],"down","1")}break;case"IOS":break;default:break}else switch(s){case"ANDROID":this.creatVideoPlay(t);break;case"IOS":break;default:break}}},polling:function(e){var t=plus.os.name.toUpperCase(),i=this.name,n=this.downVideo[e].name;switch(t){case"ANDROID":var s=plus.android.newObject("com.tjyz.video.download.VideoUtils"),a=plus.android.invoke(s,"getProgress",i,n);this.$set(this.downVideo[e],"percent",a),-1!=a.indexOf("B")&&(clearInterval(this.timer),this.$set(this.downVideo[e],"size",a));break;case"IOS":break;default:break}},checkboxChange:function(e){var t=this.downVideo,i=e.detail.value;this.num=i.length,this.selectedArr=i;for(var n=0,s=t.length;n<s;++n){var a=t[n],o=a.name;i.includes(o)?this.$set(a,"checked",!0):this.$set(a,"checked",!1)}this.num<t.length?this.allSelect="全选":this.allSelect="取消全选"},all_select:function(){var e=this.downVideo;if(this.isSelect){if(this.num<this.downVideo.length){this.num=this.downVideo.length,this.selectedArr=[];for(var t=0,i=e.length;t<i;++t){var n=e[t];this.$set(n,"checked",!0),this.selectedArr.push(n.name)}return void(this.allSelect="取消全选")}for(t=0,i=e.length;t<i;++t){var s=e[t];this.$set(s,"checked",!1)}this.num=0,this.isSelect=!1,this.allSelect="全选",this.selectedArr=[]}else{this.selectedArr=[];for(t=0,i=e.length;t<i;++t){var a=e[t];this.$set(a,"checked",!0),this.selectedArr.push(a.name)}this.num=e.length,this.isSelect=!0,this.allSelect="取消全选"}},deleteItem:function(){var e=plus.os.name.toUpperCase(),t=[this.name];t=JSON.stringify(t);var i=JSON.stringify(this.selectedArr);switch(e){case"ANDROID":var n=plus.android.newObject("com.tjyz.video.download.VideoUtils"),s=(plus.android.invoke(n,"deleteFile",t,i),plus.android.newObject("com.tjyz.video.download.VideoUtils")),a=plus.android.invoke(s,"downloadList",this.name);this.downVideo=JSON.parse(a);var o=this.$mp.page.$getAppWebview();o.setStyle({titleNView:{autoBackButton:!0}}),o.setTitleNViewButtonStyle(0,{text:"编辑"}),this.isCancel=!1;break;case"IOS":break;default:break}}},onNavigationBarButtonTap:function(){var e=this.$mp.page.$getAppWebview();plus.os.name.toUpperCase();if(this.isCancel){e.setStyle({titleNView:{autoBackButton:!0}}),e.setTitleNViewButtonStyle(0,{text:"编辑"}),this.isCancel=!1,this.num=0,this.isSelect=!1,this.allSelect="全选";for(var t=0,i=this.downVideo.length;t<i;++t){var n=this.downVideo[t];this.$set(n,"checked",!1)}}else{e.setStyle({titleNView:{autoBackButton:!1}}),e.setTitleNViewButtonStyle(0,{text:"取消"}),this.isCancel=!0;for(var s=0;s<this.downVideo.length;s++)if(this.downVideo[s],1==this.downVideo[s].down){var a=plus.android.newObject("com.tjyz.video.download.DownloadTask");plus.android.invoke(a,"pauseDownload"),clearInterval(this.timer),this.$set(this.downVideo[s],"percent","已暂停"),this.$set(this.downVideo[s],"down","0")}}},onLoad:function(e){var t=this;this.name=e.name,i.setNavigationBarTitle({title:this.name});var n=plus.os.name.toUpperCase();if("ANDROID"===n){var s=plus.android.newObject("com.tjyz.video.download.VideoUtils"),a=plus.android.invoke(s,"downloadList",this.name);this.downVideo=JSON.parse(a);for(var o=0;o<this.downVideo.length;o++)if(1==this.downVideo[o].down){this.index=o,this.timer=setInterval(function(){t.polling(t.index)},1500);break}}else IOS},onUnload:function(){clearInterval(this.timer)},onHide:function(){clearInterval(this.timer)}};t.default=n}).call(this,i("0de9")["default"],i("6e42")["default"])},"76a6":function(e,t,i){"use strict";var n=i("80fb"),s=i.n(n);s.a},"80fb":function(e,t,i){},8108:function(e,t,i){"use strict";i.r(t);var n=i("ca94"),s=i("13d0");for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);i("76a6");var o=i("2877"),l=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,null,null);t["default"]=l.exports},ca94:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},s=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return s})}},[["05ab","common/runtime","common/vendor"]]]);