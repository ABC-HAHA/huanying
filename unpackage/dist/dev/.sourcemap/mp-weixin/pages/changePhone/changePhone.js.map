{"version":3,"sources":["webpack:///D:/项目/98影视/pages/changePhone/changePhone.vue?535a","webpack:///D:/项目/98影视/pages/changePhone/changePhone.vue?32a1","webpack:///D:/项目/98影视/pages/changePhone/changePhone.vue?aee8","webpack:///D:/项目/98影视/pages/changePhone/changePhone.vue?e5dd","webpack:///D:/项目/98影视/pages/changePhone/changePhone.vue","webpack:///D:/项目/98影视/pages/changePhone/changePhone.vue?46ab","webpack:///D:/项目/98影视/pages/changePhone/changePhone.vue?2ae7"],"names":["data","num","countdown","beginFalg","codeTime","timeText","codeText","newPhone","methods","sendCode","phone_regExp","phone","test","uni","showToast","title","icon","mask","setTimeout","hideToast","setInterval","countDown","phoneStr","Buffer","toString","request","url","websiteUrl","method","mobile","success","res","console","log","fail","complete","clearInterval","checkCode","checkPhone","confirm","showModal","content","showCancel","cancelText","confirmText","userinfo","$store","state","userInfo","userid","userId","usertoken","loginToken","oldPhoneStr","newPhoneStr","header","Authorization","smsCode","newMobile","status","phonestr","user","userPhone","commit","navigateBack","message","navigateTo","animationType","computed"],"mappings":"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","file":"pages/changePhone/changePhone.js","sourcesContent":["import { render, staticRenderFns } from \"./changePhone.vue?vue&type=template&id=4d2debfa&\"\nimport script from \"./changePhone.vue?vue&type=script&lang=js&\"\nexport * from \"./changePhone.vue?vue&type=script&lang=js&\"\nimport style0 from \"./changePhone.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('4d2debfa', component.options)\n    } else {\n      api.reload('4d2debfa', component.options)\n    }\n    module.hot.accept(\"./changePhone.vue?vue&type=template&id=4d2debfa&\", function () {\n      api.rerender('4d2debfa', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"项目/98影视/pages/changePhone/changePhone.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./changePhone.vue?vue&type=template&id=4d2debfa&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./changePhone.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./changePhone.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n                num: 60,\n                countdown: '',\n                beginFalg: false,\n                codeTime: '',\n                timeText: '',\n                codeText: '',\n                newPhone: ''\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tsendCode(){\n\t\t\t    let phone_regExp = /^1[3-9]\\d{9}$/;\n\t\t\t    if (this.phone == '' || !phone_regExp.test(this.phone)) {\n\t\t\t        uni.showToast({\n\t\t\t            title: '请检查手机号',\n\t\t\t            icon: 'none',\n                        mask: true\n\t\t\t        });\n                    setTimeout(function(){\n                        uni.hideToast();\n                    },2000)\n\t\t\t        return false;\n\t\t\t    }\n\t\t\t    this.codeTime = setInterval(this.countDown,1000);\n\t\t\t    let phoneStr = new Buffer(this.phone).toString('base64');\n\t\t\t    uni.request({\n\t\t\t        url: this.websiteUrl + '/api/code/sms',\n\t\t\t        method: 'POST',\n\t\t\t        data: {\n\t\t\t            mobile: phoneStr\n\t\t\t        },\n\t\t\t        success: res => {\n\t\t\t            console.log(res)\n\t\t\t        },\n\t\t\t        fail: () => {},\n\t\t\t        complete: () => {}\n\t\t\t    });\n\t\t\t},\n\t\t\tcountDown(){\n\t\t\t    this.num--;\n\t\t\t    this.beginFalg = true;\n\t\t\t    this.timeText = this.num + 's';\n\t\t\t    if (this.num <= 0) {\n\t\t\t        this.num = 60;\n\t\t\t        this.timeText = '';\n\t\t\t        this.beginFalg = false;\n\t\t\t        clearInterval(this.codeTime)\n\t\t\t    }\n\t\t\t},\n            checkCode(){\n                if (this.codeText != '') {\n                    return true\n                } else {\n                    uni.showToast({\n                        title: '验证码不能为空',\n                        icon: 'none',\n                        mask: true\n                    });\n                    setTimeout(function(){\n                        uni.hideToast();\n                    },2000)\n                    return false\n                }\n            },\n            checkPhone(){\n                let phone_regExp = /^1[3-9]\\d{9}$/;\n                if (this.newPhone != '' && phone_regExp.test(this.newPhone)) {\n                    return true\n                } else {\n                    uni.showToast({\n                        title: '请检查手机号',\n                        icon: 'none',\n                        mask: true\n                    });\n                    setTimeout(function(){\n                        uni.hideToast();\n                    },2000)\n                    return false\n                }\n            },\n            confirm(){\n                if (this.checkCode() && this.checkPhone()) {\n                    uni.showModal({\n                        title: '确认手机号',\n                        content: '确认要将手机号修改为' + this.newPhone,\n                        showCancel: true,\n                        cancelText: '取消',\n                        confirmText: '确定',\n                        success: res => {\n                            if (res.confirm) {\n                                let userinfo = this.$store.state.userInfo;\n                                let userid = userinfo.userId;\n                                let usertoken = userinfo.loginToken;\n                                let oldPhoneStr = new Buffer(this.phone).toString('base64');\n                                let newPhoneStr = new Buffer(this.newPhone).toString('base64');\n                                uni.request({\n                                    url: this.websiteUrl + '/api/user/updMobile',\n                                    method: 'POST',\n                                    header:{\n                                        Authorization: usertoken\n                                    },\n                                    data: {\n                                        userId: userid,\n                                        mobile: oldPhoneStr,\n                                        smsCode: this.codeText,\n                                        newMobile: newPhoneStr\n                                    },\n                                    success: res => {\n                                        if (res.data.status == 0) {\n                                            let phonestr = new Buffer(res.data.user.userPhone,'base64').toString('utf8');\n                                            userinfo.userPhone = phonestr;\n                                            this.$store.commit('login',userinfo);\n                                            uni.showToast({\n                                                title: '修改成功',\n                                                mask: true\n                                            });\n                                            setTimeout(function(){\n                                                uni.hideToast();\n                                                uni.navigateBack();\n                                            },400)\n                                        } else if (res.data.status == 1001) {\n                                            uni.showToast({\n                                                title: res.data.message,\n                                                icon: 'none',\n                                                mask: true\n                                            });\n                                            setTimeout(function () {\n                                                uni.hideToast();\n                                                uni.navigateTo({\n                                                    url:\"/pages/login/login\",\n                                                    animationType:\"slide-in-right\"\n                                                });\n                                            }, 300)\n                                        } else {\n                                            uni.showToast({\n                                                title: res.data.message,\n                                                icon: 'none',\n                                                mask: true\n                                            });\n                                            setTimeout(function(){\n                                                uni.hideToast();\n                                            },2000)\n                                        }\n                                    },\n                                    fail: () => {},\n                                    complete: () => {}\n                                });\n                            }\n                        },\n                        fail: () => {},\n                        complete: () => {}\n                    });\n                } else {\n                    return false\n                }\n            }\n\t\t},\n        computed:{\n            phone: function () {\n                return this.$store.state.userInfo.userPhone;\n            }\n        }\n\t}\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./changePhone.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./changePhone.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}